<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="What is my IP?">
  <meta property="og:type" content="My IP Finder">
  <meta property="og:title" content="By en.userali.ir">
  <link rel="icon" href="myip.webp">
  <title>My IP</title>
  <link rel="stylesheet" href="https://cdn.font.ir/css/Vazir.css">
  <link rel="stylesheet" href="style.css">
  <script>
    document.onkeydown = function (e) {
      if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || (e.ctrlKey && e.keyCode === 85)) {
        return false;
      }
    };
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });
  </script>
</head>
<body>

<div class="centered" ng-app="app" ng-controller="IPController">
  <h1>Your IP address is:</h1>
  <div class="box blurred">
    <div ng-if="ipv4" ng-bind="ipv4"></div>
    <div ng-if="ipv6" ng-bind="ipv6"></div>
    <button ng-click="revealIP()">Reveal IP</button>
  </div>
</div>

<script src='https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.14/angular.min.js'></script>
<script>
  angular.module('app', []).controller('IPController', ['$scope', '$http', function($scope, $http) {
    const fetchIP = () => {
      $http.get('https://api.ipify.org?format=json').then(response => {
        $scope.ipv4 = response.data.ip;
      }).catch(() => {
        $scope.ipv4 = null;
      });

      $http.get('https://api64.ipify.org?format=json').then(response => {
        $scope.ipv6 = response.data.ip;
      }).catch(() => {
        $scope.ipv6 = null;
      });
    };
    
    fetchIP();
    setInterval(fetchIP, 30000);

    $scope.revealIP = function() {
      document.querySelector('.box').classList.remove('blurred');
      setTimeout(() => {
        document.querySelector('.box').classList.add('blurred');
      }, 10000);
    };
  }]);
</script>

</body>
</html>
